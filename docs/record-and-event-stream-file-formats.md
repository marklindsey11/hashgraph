# Record and Event Stream File Formats

## Overview 

The Hedera network produces record stream files and event stream files that captures chronological information about transactions that took place on the network. A record stream file is a file that contains a series of transactions in chronological order that occurred within a two second interval. The record stream file \(.rcd\) contains a transaction record for each transaction in that file. For each record stream file there is a corresponding signature file \(rcd\_sig\) that includes the signature generated by the node. The event stream file\(.evts\) contains information about an event. Event information includes event hash data, event unhashed data, and consensus data. Each event stream files are created in 5 second intervals. Each event stream file has a corresponding signature file \(.evts\_sig\) that includes the node signature.  

The record stream file and event stream file formats will both be updated to version 5 in a future mainnet release. 

## Version Migration 

| File Type  | Current Version  | Next Version  |
| :--- | :--- | :--- |
| Record Stream File  | [2](record-and-event-stream-file-formats.md#record-file-format-rcd)  | [5](record-and-event-stream-file-formats.md#record-file-format-rcd-1)  |
| Record Stream Signature File  | [No version number ](record-and-event-stream-file-formats.md#record-signature-file-format-rcd_sig) | [5 ](record-and-event-stream-file-formats.md#record-file-format-rcd-1) |
| Event Stream File  | [3](record-and-event-stream-file-formats.md#event-stream-file-format-evts)  | [5](record-and-event-stream-file-formats.md#event-stream-file-format-evts-1)  |
| Event Stream Signature File  | [No version number](record-and-event-stream-file-formats.md#event-stream-signature-file-format-evts_sig)  | [5](record-and-event-stream-file-formats.md#event-stream-signature-file-format-evts_sig-1)  |

**Note:** Current record signature files \(rcd\_sig\) and event signature \(evts\_sig\) file formats do not have a version number. The first byte's value is 4, which denotes a marker. For maintaining backwards compatibility, we made the first byte in the new version stream signature file be 5, which denotes the version. Thus, we use version 5 as the next version number. 

## Version 2 Record Stream File Format 

### Record Stream Files Names 

A record stream file name is made up of a string representation of the Instant of consensus timestamp of the first transaction in the file using ISO-8601 representation, with colons converted to underscores for Windows compatibility. The nano-of-second outputs zero, three, six or nine digits as necessary. 

Examples of a record stream file name with corresponding signature file: 

Example 1: 

Record Stream File: 2020-10-19T21\_35\_39Z.rcd 

Record Stream Signature File: 2020-10-19T21\_35\_39Z.rcd\_sig 

Example 2: 

Record Stream File: 2020-10-19T21\_35\_39.454265Z.rcd 

Record Stream Signature File: 2020-10-19T21\_35\_39.454265Z.rcd\_sig 

### Record Stream File Format \(.rcd\) 

The below table describes the content that can be parsed from a record file. 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Record Stream File Format Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Record stream file format version,</p>
        <p>Value: 2</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Hapi Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>HAPI protocol version,</p>
        <p>Value: 3</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Prev File Hash Marker</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 1</td>
    </tr>
    <tr>
      <td style="text-align:left">Prev File Hash</td>
      <td style="text-align:left">byte[48]</td>
      <td style="text-align:left">SHA384 hash of previous file, if not exist then all zeroes</td>
    </tr>
    <tr>
      <td style="text-align:left">Record Marker</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 2</td>
    </tr>
    <tr>
      <td style="text-align:left">Length of Transaction</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Byte size of the following Transaction message</td>
    </tr>
    <tr>
      <td style="text-align:left">Transaction</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Serialized Transaction message bytes</td>
    </tr>
    <tr>
      <td style="text-align:left">Length of TransactionRecord</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Byte size of the following TransactionRecord message</td>
    </tr>
    <tr>
      <td style="text-align:left">TransactionRecord</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Serialized TransactionRecord message bytes</td>
    </tr>
    <tr>
      <td style="text-align:left">Record Marker</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 2</td>
    </tr>
    <tr>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
    </tr>
  </tbody>
</table>

The signature file \*.rcd\_sig signs the hash of corresponding \*.rcd file; 

###   Record Stream Signature File Format \(.rcd\_sig\)

{% hint style="info" %}
**Note:** Event stream signature file format does not have a version number 
{% endhint %}

The below table describes the content that can be parsed from a record signature file. 

| Name  | Type \(Bytes\)  | Description  |
| :--- | :--- | :--- |
| File Hash Marker  | byte  | Value: 4  |
| File Hash  | byte\[48\]  | SHA384 hash of corresponding \*.rcd file  |
| Signature Marker  | byte  | Value: 3  |
| Length of Signature  | int \(4\)  | Byte size of the following signature bytes  |
| Signature   | byte\[\]  | Signature bytes  |

#### File Hash Calculation 

The record file hash is calculated using the following formula. 

**h\[i\] = hash\(p\[i-1\] \|\| h\[i-1\] \|\| hash\(c\[i-1\]\)\)** 

* **\|\|** denotes concatenation 
* **h\[i\]** is the hash of the file i 
* **p\[i-1\]** is the contents in the file before the PREV\_FILE\_HASH 
* **h\[i-1\]** is the hash of file i-1, i.e., PREV\_FILE\_HASH 
* **c\[i-1\]** is the contents of the file after PREV\_FILE\_HASH 

## Version 5 Record Stream File Format 

Generated using functionality provided by swirlds-common in the swirlds-platform sdk for serializing objects to record files \(.rcd\), and deserializing objects from record file \(.rcd\). In the next release, swirlds-common package will contain functionalities for parsing and verifying version 5 record stream files, which can be used by both services and mirror node.  

### Record Stream Files Names 

A record file name is created using a string representation of the Instant of consensus timestamp of the first transaction in the file using ISO-8601 representation, with colons converted to underscores for Windows compatibility.  

The nano-of-second always outputs nine digits with padding when necessary, to ensure same length filenames and proper sorting.  

Examples of a record stream file name with corresponding signature file: 

Example 1: 

Record File \(.rcd\): 2020-10-19T21\_35\_39.000000000Z.rcd 

Record Signature File\(.rcd\_sig\): 2020-10-19T21\_35\_39.000000000Z.rcd\_sig 

Example 2: 

Record File \(.rcd\): 2020-10-19T21\_35\_39.454265000Z.rcd 

Record Signature File\(.rcd\_sig\): 2020-10-19T21\_35\_39.454265000Z.rcd\_sig 

### Record Stream File Format \(.rcd\)

#### MD – Meta Data 

The below tables describe the content that can be parsed from a record file. 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
      <th style="text-align:left">MD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Record Stream File Format Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Record stream file format version,</p>
        <p>Value: 5</p>
      </td>
      <td style="text-align:left">y</td>
    </tr>
    <tr>
      <td style="text-align:left">Hapi Proto Major Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Matches NetworkGetVersionInfo.hapiProtoVersion</p>
        <p>Major.Minor.Patch</p>
        <p>Major version: 0;</p>
        <p>Minor version: 9;</p>
        <p>Patch version: 0</p>
      </td>
      <td style="text-align:left">y</td>
    </tr>
    <tr>
      <td style="text-align:left">Hapi Proto Minor Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left"></td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">Hapi Proto Patch Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left"></td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">Object stream version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 1</p>
        <p>This defines the format of the remainder of the file. This version number
          is used when parsing a stream file with methods defined in swirlds-common
          package</p>
      </td>
      <td style="text-align:left">y</td>
    </tr>
    <tr>
      <td style="text-align:left">Start Object Running Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">
        <p>Running Hash of all RecordStreamObject before writing this file.</p>
        <p>See `Hash object` table below for details</p>
      </td>
      <td style="text-align:left">y</td>
    </tr>
    <tr>
      <td style="text-align:left">1st RecordStreamObject</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">
        <p>Serialized RecordStreamObject bytes.</p>
        <p>See ` RecordStreamObject ` table below for details</p>
      </td>
      <td style="text-align:left">n</td>
    </tr>
    <tr>
      <td style="text-align:left">2nd RecordStreamObject</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">n</td>
    </tr>
    <tr>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">n</td>
    </tr>
    <tr>
      <td style="text-align:left">End Object Running Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Running Hash of all RecordStreamObject before closing this file.</td>
      <td
      style="text-align:left">y</td>
    </tr>
  </tbody>
</table>

#### Hash Object 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Class ID</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">Value: 0xf422da83a251741e</td>
    </tr>
    <tr>
      <td style="text-align:left">Class Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 1</p>
        <p>This version number will be updated each time when the serialization format
          of a Hash object is changed</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Digest Type</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 0x58ff811b</p>
        <p>denotes SHA-384</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Length of Hash</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 48 for SHA-384</td>
    </tr>
    <tr>
      <td style="text-align:left">Hash Bytes</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Serialized Hash bytes</td>
    </tr>
  </tbody>
</table>

#### Record Stream Object 

| Name  | Type \(Bytes\)  | Description  |
| :--- | :--- | :--- |
| Class ID  | long \(8\)  | Value: 0xe370929ba5429d8b  |
| Class Version  | int \(4\)  | Value: 1  |
| Length of TransactionRecord  | int \(4\)  | Byte size of the following TransactionRecord message  |
| TransactionRecord  | byte\[\]  | Serialized TransactionRecord message bytes  |
| Length of Transaction  | int \(4\)  | Byte size of the following Transaction message  |
| Transaction  | byte\[\]  | Serialized Transaction message bytes  |

### Record Stream Signature File Format \(.rcd\_sig\)

In version 5, the record stream signature file format is the same as event stream signature file format. The below tables describe the content that can be parsed from a record signature file. 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Signature File Format Version</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 5</td>
    </tr>
    <tr>
      <td style="text-align:left">Object Stream Signature Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 1</p>
        <p>This defines the format of the remainder of the signature file. This version
          number is used when parsing a signature file with methods defined in swirlds-common
          package</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Entire Hash of the corresponding stream file</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Hash of the entire corresponding stream file</td>
    </tr>
    <tr>
      <td style="text-align:left">Signature on hash bytes of Entire Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">A signature object generated by signing the hash bytes of Entire Hash.
        See ` Signature ` table below for details</td>
    </tr>
    <tr>
      <td style="text-align:left">Metadata Hash of the corresponding stream file</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Metadata Hash of the corresponding stream file</td>
    </tr>
    <tr>
      <td style="text-align:left">Signature on hash bytes of Metadata Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">A signature object generated by signing the hash bytes of Metadata Hash</td>
    </tr>
  </tbody>
</table>

#### Signature Object 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Class ID</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">Value: 0x13dc4b399b245c69</td>
    </tr>
    <tr>
      <td style="text-align:left">Class Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 1</td>
    </tr>
    <tr>
      <td style="text-align:left">SignatureType</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 1</p>
        <p>Denotes SHA384withRSA</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Length of Signature</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Byte size of the signature bytes</td>
    </tr>
    <tr>
      <td style="text-align:left">Signature bytes</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Serialized Signature bytes</td>
    </tr>
  </tbody>
</table>

#### File Hash Calculation 

In version 5 there are 3 different hashes being calculated: 

#### Object Running Hash 

* Object Running hash is calculated based on hash of each object, which allows us to remove contents of an object from a stream file while maintaining an unbroken chain of hashes.  
* The object running hash will be saved in state, so that reconnect nodes will be able to continue generating stream files identical to those generated by other nodes after reconnecting.  
* Object running hash is calculated as the following:  `hash(Object Running Hash || hash(OBJECT))`  
  * \|\| denotes concatenation 
  * In the event stream file OBJECT will be each event; 
  * In the record stream file OBJECT will be the Record Stream Object; 

#### Entire .rcd Hash 

* This hash is calculated on all the bytes of a .rcd file. 
* With the entire hash, mirror node can download valid .rcd files whose entire hash are agreed on by valid signatures of at least 1/3 of nodes. 
* Suppose the content of a .rcd file with version 5’s content is as following:   `f[i] = head[i] || startHash[i] || contents[i] || endHash[i]`  
  * \|\| denotes concatenation
  * f\[i\] denotes the whole content of a .rcd file;
  * head\[i\] denotes the bytes before the start Object Running Hash; 
  * startHash\[i\] denotes the Object Running Hash before writing this file;
  * contents\[i\] denotes the content between the start Object Running Hash and the end    Object Running Hash;
  * endHash \[i\] denotes the Object Running Hash before closing this file;
* Entire hash is calculated as following: 

     `entireHash[i] = hash(head[i] || startHash[i] || contents[i] || endHash[i])` 

**Metadata .rcd Hash** 

* This hash is calculated on metadata bytes in the file, denoted in the table. 
* If some contents of an object were removed from a file, the metadata hash would still be valid. 
* Metadata hash is calculated as following: 

   `metaHash[i] = hash(head[i] || startHash[i] || endHash[i])`   

## Version 3 Event Stream File Format 

### Event Stream Files Names 

A string representation of the Instant of consensus timestamp of the first transaction in the file using ISO-8601 representation, with colons converted to underscores for Windows compatibility. The nano-of-second outputs zero, three, six or nine digits as necessary. 

Example of an event stream file name with corresponding signature file: 

Event Stream File \(.evts\): 2020-10-19T21\_35\_39.454265Z.evts 

Event Stream Signature File \(.evts\_sig\): 2020-10-19T21\_35\_39.454265Z.evts\_sig 

### Event Stream File Format \(.evts\) 

The below table describes the content that can be parsed from an event stream file. 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Event Stream File Format Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 3</td>
    </tr>
    <tr>
      <td style="text-align:left">Prev File Hash Marker</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 1</td>
    </tr>
    <tr>
      <td style="text-align:left">Prev File Hash</td>
      <td style="text-align:left">byte[48]</td>
      <td style="text-align:left">SHA384 hash of previous .evts file, if not exist then all zeroes</td>
    </tr>
    <tr>
      <td style="text-align:left">Event Marker</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 90</td>
    </tr>
    <tr>
      <td style="text-align:left">Event Format Version<b> </b>
      </td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 3</td>
    </tr>
    <tr>
      <td style="text-align:left">Event</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">
        <p>serialized Event bytes</p>
        <p>see ` ConsensusEvent` table for details</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Event&apos;s Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">This Event&#x2019;s Hash</td>
    </tr>
    <tr>
      <td style="text-align:left">Event Marker</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 90</td>
    </tr>
    <tr>
      <td style="text-align:left">...</td>
      <td style="text-align:left">&#x2026;</td>
      <td style="text-align:left">&#x2026;</td>
    </tr>
  </tbody>
</table>

### Event Stream Signature File Format \(.evts\_sig\)

{% hint style="info" %}
**Note:** Event stream signature file format does not have a version number 
{% endhint %}

The below table describes the content that can be parsed from an event stream signature file. 

| Name  | Type \(Bytes\)  | Description  |
| :--- | :--- | :--- |
| File Hash Marker  | byte  | Value: 4  |
| File Hash  | byte\[48\]  | SHA384 hash of corresponding \*.evts file  |
| Signature Marker  | byte  | Value: 3  |
| Length of Signature  | int \(4\)  | Byte size of the following signature bytes  |
| Signature   | byte\[\]  | Signature bytes  |

## Version 5 Event Stream File Format 

Generated using functionality provided by swirlds-common for serializing objects to .evts file, and deserializing objects from .evts file. In the next release, swirlds-common will contain functionalities for parsing and verifying version 5 event stream files, which can be used by both services and mirror node. 

### Event Stream Files Names 

A string representation of the Instant of consensus timestamp of the first transaction in the file using ISO-8601 representation, with colons converted to underscores for Windows compatibility.  

The nano-of-second always outputs nine digits with padding when necessary, to ensure same length filenames and proper sorting.  

Example of an event stream file name with corresponding signature file. 

Example 1: 

Event Stream File \(.evts\): 2020-10-19T21\_35\_39.000000000Z.evts 

Event Stream Signature File \(.evts\_sig\): 2020-10-19T21\_35\_39.000000000Z.evts\_sig 

Example 2: 

Event Stream File \(.evts\): 2020-10-19T21\_35\_39.454265000Z.evts 

Event Stream Signature File \(.evts\_sig\): 2020-10-19T21\_35\_39.454265000Z.evts\_sig 

### Event Stream File Format \(.evts\) 

The below tables describe the information that can be parsed from an event stream file. 

#### MD – Meta Data 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
      <th style="text-align:left">MD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Event Stream File Format Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Event stream file format version,</p>
        <p>Value: 5</p>
      </td>
      <td style="text-align:left">y</td>
    </tr>
    <tr>
      <td style="text-align:left">Object Stream Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 1</p>
        <p>This defines the format of the remainder of the file. This version number
          is used when parsing a stream file with methods defined in swirlds-common
          package</p>
      </td>
      <td style="text-align:left">y</td>
    </tr>
    <tr>
      <td style="text-align:left">Start Object Running Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Running Hash of all Events reached consensus before writing this file</td>
      <td
      style="text-align:left">y</td>
    </tr>
    <tr>
      <td style="text-align:left">1st ConsensusEvent</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">
        <p>Serialized ConsensusEvent bytes.</p>
        <p>The following ` ConsensusEvent ` table contains detail of a ConsensusEvent</p>
      </td>
      <td style="text-align:left">n</td>
    </tr>
    <tr>
      <td style="text-align:left">2nd ConsensusEvent</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">n</td>
    </tr>
    <tr>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">n</td>
    </tr>
    <tr>
      <td style="text-align:left">End Object Running Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Running Hash of all Events reached consensus before closing this file</td>
      <td
      style="text-align:left">y</td>
    </tr>
  </tbody>
</table>

#### ConsensusEvent 

| Name  | Type \(Bytes\)  | Description  |
| :--- | :--- | :--- |
| Class ID  | long \(8\)  | Value: 0xe250a9fbdcc4b1ba  |
| Class version  | Int  | Value: 1  |
| BaseEventHashedData  | byte\[\]  | Serialized BaseEventHashedData bytes  |
| BaseEventUnhashedData  | byte\[\]  | Serialized BaseEventUnhashedData bytes  |
| ConsensusData  | byte\[\]  | Serialized ConsensusData bytes  |

#### BaseEventHashedData 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Class Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 1</td>
    </tr>
    <tr>
      <td style="text-align:left">Creator&#x2019;s Id</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">ID of this event&apos;s creator</td>
    </tr>
    <tr>
      <td style="text-align:left">SelfParent&apos;s Generation</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">the generation for the event&#x2019;s self parent</td>
    </tr>
    <tr>
      <td style="text-align:left">OtherParent&apos;s Generation</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">the generation for the event&#x2019;s other parent</td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>SelfParent&apos;s Hash</p>
        <p>Class version</p>
      </td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 1</td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>SelfParent&apos;s Hash</p>
        <p>Digest Type</p>
      </td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 0x58ff811b</p>
        <p>denotes SHA-384</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>SelfParent&apos;s Hash</p>
        <p>length</p>
      </td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 48 for SHA-384</td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>SelfParent&apos;s</p>
        <p>Hash bytes</p>
      </td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">SelfParent&apos;s Hash bytes</td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>OtherParent&apos;s Hash</p>
        <p>Class version</p>
      </td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 1</td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>OtherParent&apos;s Hash</p>
        <p>Digest Type</p>
      </td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 0x58ff811b</p>
        <p>denotes SHA-384</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>OtherParent&apos;s Hash</p>
        <p>length</p>
      </td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 48 for SHA-384</td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>OtherParent&apos;s Hash</p>
        <p>bytes</p>
      </td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">OtherParent&apos;s Hash bytes</td>
    </tr>
    <tr>
      <td style="text-align:left">Time Created</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">
        <p>Creation time of this event</p>
        <p>See `Instant` table for details</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Transactions</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">
        <p>A serialized array of Transactions,</p>
        <p>Details is shown in the following table</p>
      </td>
    </tr>
  </tbody>
</table>

#### Transactions: serialized form of an array of transactions 

<table>
  <thead>
    <tr>
      <th style="text-align:left"></th>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left"></td>
      <td style="text-align:left">Size of the Transaction Array</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Number of transactions in this array.</p>
        <p>-1 denotes null.</p>
        <p>0 denotes empty array.</p>
        <p>Stop deserialization when size is &#x2013;1 or 0.</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left"></td>
      <td style="text-align:left">All Same Class</td>
      <td style="text-align:left">boolean (1 bit)</td>
      <td style="text-align:left">Value: true</td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>1st</p>
        <p>Transaction</p>
      </td>
      <td style="text-align:left">isNull</td>
      <td style="text-align:left">boolean (1 bit)</td>
      <td style="text-align:left">Whether this transaction is null</td>
    </tr>
    <tr>
      <td style="text-align:left">Transaction Class Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 1</td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">Length of Contents</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Length of contents in this transaction</td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">Checksum</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">277 &#x2013; contents.length</td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">System</td>
      <td style="text-align:left">boolean (1 bit)</td>
      <td style="text-align:left">Whether this transaction was originated by the application or the platform</td>
      <td
      style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">Contents</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Contents bytes</td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">Size of Signatures List</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 0</p>
        <p>signatures are not serialized, so the size is 0</p>
      </td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">CheckSum</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 353</td>
      <td style="text-align:left"></td>
    </tr>
    <tr>
      <td style="text-align:left">
        <p>2nd</p>
        <p>Transaction</p>
      </td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
    </tr>
    <tr>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
      <td style="text-align:left">...</td>
    </tr>
  </tbody>
</table>

#### Instant 

| Name  | Type \(Bytes\)  | Description  |
| :--- | :--- | :--- |
| Epoch Second  | long \(8\)  | If this instant is null, Epoch Second will be Long.MIN\_VALUE  |
| Nanos  | long \(8\)  | If the instant is null, Nanos will not be written  |

#### BaseEventUnhashedData 

| Name  | Type \(Bytes\)  | Description  |
| :--- | :--- | :--- |
| Class Version  | int \(4\)  | Value: 1  |
| Creator Sequence  | long \(8\)  | Sequence number for this by its creator \(0 is first\)  |
| OtherParent’s ID  | long \(8\)  | ID of otherParent  |
| OtherParent’s Sequence  | long \(8\)  | Sequence number for otherParent event  |
| Length of Signature  | int \(4\)  | Length of signature bytes  |
| Signature bytes  | byte\[\]  | Creator's signature bytes for this event  |

#### ConsensusData 

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Class Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">Value: 2</td>
    </tr>
    <tr>
      <td style="text-align:left">Generation</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">Generation (which is 1 plus max of parents&apos; generations)</td>
    </tr>
    <tr>
      <td style="text-align:left">Round Created</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">The created round of this event</td>
    </tr>
    <tr>
      <td style="text-align:left">isStale</td>
      <td style="text-align:left">boolean (1 bit)</td>
      <td style="text-align:left">Is there a consensus that this event is stale (no order, transactions
        ignored)</td>
    </tr>
    <tr>
      <td style="text-align:left">Last Event in Round Received</td>
      <td style="text-align:left">boolean (1 bit)</td>
      <td style="text-align:left">Is this event the last in consensus order of all those with the same received
        round</td>
    </tr>
    <tr>
      <td style="text-align:left">Consensus Timestamp</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">
        <p>The community&apos;s consensus timestamp for this event</p>
        <p>See `Instant` table for details</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Round Received</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">Round where &gt;=1/2 famous see this event</td>
    </tr>
    <tr>
      <td style="text-align:left">Consensus Order</td>
      <td style="text-align:left">long (8)</td>
      <td style="text-align:left">The event&#x2019;s consensus order in history (0 first)</td>
    </tr>
  </tbody>
</table>

### Event Stream Signature File Format \(.evts\_sig\)

In version 5, the event stream signature file format is the same as record stream signature file format. The below table describes the content that can be parsed from an event stream signature file.  

<table>
  <thead>
    <tr>
      <th style="text-align:left">Name</th>
      <th style="text-align:left">Type (Bytes)</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">Signature File Format Version</td>
      <td style="text-align:left">byte</td>
      <td style="text-align:left">Value: 5</td>
    </tr>
    <tr>
      <td style="text-align:left">Object Stream Signature Version</td>
      <td style="text-align:left">int (4)</td>
      <td style="text-align:left">
        <p>Value: 1</p>
        <p>This defines the format of the remainder of the signature file. This version
          number is used when parsing a signature file with methods defined in swirlds-common
          package</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">Entire Hash of the corresponding stream file</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Hash of the entire corresponding stream file</td>
    </tr>
    <tr>
      <td style="text-align:left">Signature on hash bytes of Entire Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">A signature object generated by signing the hash bytes of Entire Hash.
        See ` Signature ` table below for details</td>
    </tr>
    <tr>
      <td style="text-align:left">Metadata Hash of the corresponding stream file</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">Metadata Hash of the corresponding stream file</td>
    </tr>
    <tr>
      <td style="text-align:left">Signature on hash bytes of Metadata Hash</td>
      <td style="text-align:left">byte[]</td>
      <td style="text-align:left">A signature object generated by signing the hash bytes of Metadata Hash</td>
    </tr>
  </tbody>
</table>

